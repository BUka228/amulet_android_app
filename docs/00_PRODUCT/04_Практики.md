# Фича «Практики» и курсы

## 1. Цели фичи
- Обеспечить пользователю структурированный, безопасный и управляемый путь работы с практиками (дыхание, медитации, звуковые ландшафты и др.)
- Связать разрозненные практики в программы и курсы с прозрачным прогрессом и результатами
- Дать enterprise‑уровень контроля: фильтры, статусы, планирование, отчётность
- Явно связать практики/курсы с амулетом: каждая практика = продуманный протокол + паттерн амулета

## 2. Основные сущности
- **Практика**
  - Тип: дыхание / медитация / звук / смешанная
  - Метаданные: длительность, уровень (новичок/средний/продвинутый), цель (сон, стресс, энергия, фокус и т.п.), противопоказания
  - Контент: описание, шаги, аудио/видео (опционально), визуализации для экрана
  - Амулет: связанный паттерн света/вибрации, пресет яркости/интенсивности
- **Сессия практики**
  - Факт выполнения: время старта/окончания, результат (завершена/прервана), субъективная оценка
- **Курс**
  - Набор практик, сгруппированных по дням/модулям
  - Цель курса, длительность, рекомендуемый ритм (ежедневно/3 раза в неделю)
  - Логика прогресса: обязательные/опциональные шаги, условия перехода дальше
- **Программа / План**
  - Персонализированное расписание практик и курсов для конкретного пользователя
- **Теги и коллекции**
  - Темы («сон», «тревога», «работа»), контекст («по дороге на работу», «перед сном»)

## 3. Высокоуровневый UX-флоу
- **Дом практик (экран «Сегодня»)**
  - Пользователь открывает раздел «Практики» из таббара/меню и попадает не в каталог, а в персональный «Дом практик»
  - Вверху видит блок «Состояние сейчас?» с несколькими крупными чипами‑настроениями (например: «Нервничаю», «Хочу уснуть», «Нужна концентрация», «Просто расслабиться»)
  - Под выбором состояния — один‑два «рекомендуемых шага» на сейчас: одна короткая практика + один релевантный курс/модуль
  - Ниже — вертикальная лента секций: «Ваши курсы», «Сегодня по плану», «Быстрые ритуалы» (короткие практики), «Недавно использовали»
  - Поиск и расширенная навигация в каталог — через иконку поиска/дополнительного экрана, а не через вкладки и фильтры на главном экране
- **Выбор практики**
  - На карточках видно: название, тип, цель, длительность, уровень, отметка «часть курса», бейдж прогресса
  - Тап по карточке → экран «Детали практики»
- **Старт одиночной практики**
  - На экране деталей → кнопка «Начать сейчас» / «Запланировать»
  - Перед стартом — короткий чеклист безопасности и настройка амулета (яркость/вибрация)
- **Курсы**
  - Пользователь открывает «Курсы», выбирает курс → экран деталей курса → CTA «Записаться» / «Продолжить»
  - После записи курс попадает в «Мой план» и в «Для вас»
- **Планирование**
  - Из практики/курса → «Добавить в план» с выбором времени, дней недели, напоминаний
  - План отображается в отдельном экране «Расписание»
- **Выполнение и завершение**
  - Во время сессии: полноэкранный плеер, прогресс, управление, статус амулета
  - По завершении: оценка, короткая обратная связь, рекомендации следующего шага

## 4. Структура экранов

### 4.1. Экран «Дом практик» (главный экран)
- **Цели экрана**
  - Помочь пользователю быстро подобрать один конкретный следующий шаг «прямо сейчас», без необходимости разбираться в каталоге
  - Дать ощущение заботы и персонализированного сопровождения, а не «витрины контента»
  - Встроить курсы и план в единый контекст дня и текущего состояния пользователя
- **Основные элементы (структура)**
  - Верхний AppBar:
    - Левая часть: приветствие + текущее время дня («Доброе утро», «Добрый вечер»)
    - Правая часть: иконки перехода в «Расписание», «Статистику» и поиск (лупа)
  - Блок «Состояние сейчас?» сразу под заголовком:
    - Хедлайн/подзаголовок: «Как вы сейчас?»
    - Ряд крупных чипов‑кнопок настроения/цели (1–2 строки): «Нервничаю», «Хочу уснуть», «Нужна концентрация», «Просто расслабиться» и т.д.
    - Возможность горизонтального скролла, если чипов много
  - Блок «Рекомендовано сейчас»:
    - 1–2 крупные карточки: одна короткая практика, один модуль курса
    - Карточка практики: название, цель, длительность, бейдж «новая»/«часто используемая»
    - Карточка курса/модуля: название курса, текущий модуль, прогресс‑бар, CTA «Продолжить»
  - Блок «Ваши курсы» (горизонтальная карусель):
    - Карточки курсов: обложка, цель, прогресс, количество оставшихся сессий
    - CTA на карточке: «Продолжить» либо «Записаться» для новых курсов
  - Блок «Сегодня по плану»:
    - Список из 1–3 ближайших запланированных сессий (время, тип, курс/одиночная)
    - Краткий текст: «Сегодня вы планировали уделить себе 10 минут»
  - Блок «Быстрые ритуалы» (для коротких практик до 5 минут):
    - Чип‑кнопки типа «2 минуты дыхания», «Микропаузa для фокуса», «Сброс напряжения»
  - Блок «Недавно использовали»:
    - Маленькие карточки последних практик/курсов с временем последнего использования
- **Интеракции и поведение**
  - Тап по чипу состояния мгновенно перестраивает содержимое блоков «Рекомендовано сейчас» и «Быстрые ритуалы» с лёгкой анимацией
  - Свайп влево/вправо по «Вашим курсам» позволяет быстро выбрать курс для продолжения
  - Долгое нажатие на карточку в «Сегодня по плану» открывает контекстное меню: «Перенести», «Отменить напоминание», «Подробнее о практике»
  - Потянув экран вниз, пользователь обновляет рекомендации с учётом новых данных (например, недавно завершённой практики)
- **Состояния**
  - Пустое состояние (новый пользователь):
    - Больше фокуса на первичный выбор состояния и стартовых курсах (например, «Старт для новичка», «7 дней для сна»)
    - Исторические блоки («Недавно использовали») скрыты
  - При отсутствующем плане:
    - Блок «Сегодня по плану» заменяется CTA «Создать свой ритуал дня», ведущим в мастер планирования
  - Ошибки загрузки рекомендаций:
    - Ошибка на уровне отдельных блоков (например, «Ваши курсы недоступны») с inline‑баннером и кнопкой «Обновить»
    - Экран остаётся полезным: показываем локально предзагруженные быстрые ритуалы и базовые практики

### 4.1.1. Экран «Каталог и поиск практик»
- **Роль в навигации**
  - Вспомогательный экран для пользователей, которым нужен полный обзор контента
  - Открывается из «Дома практик» по иконке поиска (лупа) или по ссылкам из статистики/курсов
- **Цели экрана**
  - Дать структурированный обзор всех практик и курсов
  - Позволить быстро находить практики по названию, цели, типу, длительности и другим признакам
  - Сохранить ощущение контроля и прозрачности, не перегружая пользователя
- **Основные элементы**
  - Верхний AppBar:
    - Поле поиска по названию/ключевым словам (inline)
    - Кнопка «Отмена»/стрелка назад для возврата в «Дом практик»
  - Блок быстрых фильтров под строкой поиска:
    - Чипы‑фильтры: «Дыхание», «Медитации», «Звуки», «Курсы»
    - Чипы по целям: «Сон», «Стресс», «Энергия», «Фокус»
    - Чипы по длительности: «≤5 мин», «5–15 мин», «>15 мин»
  - Кнопка «Расширенные фильтры» (открывает модальное окно/BottomSheet):
    - Тип практики, цель, длительность (слайдер/диапазон), уровень (новичок/средний/продвинутый)
    - Наличие аудио, связь с амулетом (обязательная/опциональная)
    - Признак «часть курса» / «самостоятельная практика»
  - Список результатов:
    - Единый список с разделителями по типам (Напр.: «Практики», «Курсы»)
    - Карточка практики: название, цель, длительность, тип, уровень, бейджи («часто используемая», «новая», «часть курса»)
    - Карточка курса: название, краткое описание, длительность, прогресс (если уже записан)
- **Интеракции и поведение**
  - Ввод в поисковую строку:
    - Отложенный поиск (debounce), результаты обновляются по мере ввода
    - Подсветка совпадений в названиях/описаниях
  - Тап по чипам‑фильтрам мгновенно перестраивает список
  - В «Расширенных фильтрах» есть кнопки «Сбросить» и «Применить»
  - Свайп по карточке практики может открывать быстрые действия: «Добавить в план», «В избранное»
- **Состояния**
  - Пустой запрос (ничего не введено, фильтры не выбраны):
    - Показываем рекомендованные подборки: «Популярное», «Для новичков», «Короткие практики»
  - Нет результатов:
    - Сообщение «Мы не нашли практики под этот запрос» + CTA «Сбросить фильтры»
  - Ошибка загрузки:
    - Сообщение об ошибке сети, кнопка «Повторить»

### 4.2. Экран «Детали практики»
- **Основные блоки**
  - Hero‑зона:
    - Название практики
    - Цель/намерение (чип: «Сон», «Стресс», «Энергия» и т.д.)
    - Тип (дыхание/медитация/звук/микс)
    - Длительность, уровень (новичок/средний/продвинутый)
    - Иллюстрация/обложка, согласованная с паттерном амулета
  - Блок «О практике»:
    - 2–3 коротких абзаца: что будет происходить, когда лучше использовать
    - Доп. маркеры: «Лучше выполнять сидя», «Можно делать в транспорте»
  - Блок «Как проходит практика»:
    - Структура по шагам/циклам (например: «1. Вдох 4 сек», «2. Задержка 4 сек», «3. Выдох 4 сек»)
    - Для медитаций — краткий сценарий: вступление, основная часть, завершение
    - Пометка о наличии аудио/голоса (иконка на уровне блока)
  - Блок «Амулет»:
    - Мини‑аватар амулета, проигрывающий ключевую часть анимации
    - Текстовое описание паттерна («Мягкая пульсация, синхронизированная с дыханием»)
    - Параметры по умолчанию (яркость, вибрация) + 2–3 быстрых пресета («Очень мягко», «Стандарт», «Ярче»)
  - Блок безопасности:
    - Список противопоказаний (например, «Не рекомендуется при тяжелых сердечно‑сосудистых заболеваниях»)
    - Рекомендации по позе, условиям (тишина, отсутствие вождения и т.д.)
  - Блок встраивания в курсы:
    - Список курсов/программ, где используется практика
    - Кнопка перехода в соответствующий курс/модуль
- **Интеракции и состояния**
  - Скролл экрана от Hero‑зоны к деталям, при этом верхняя часть с названием/CTA может закрепляться (sticky)
  - Если амулет не подключён, рядом с блоком «Амулет» показывается статус и CTA «Подключить»
- **CTA‑кнопки (нижняя панель)**
  - Primary: «Начать практику» (занимает основное место)
  - Secondary: «Добавить в план» (открывает мастер планирования)
  - Tertiary: иконка/кнопка «Добавить в избранное» (сердце), с мгновенной обратной связью

### 4.3. Экран «Сессия практики» (плеер)
- **Верхняя часть**
  - Название практики и короткий подпоясняющий текст («Сессия 2 из 5», «Курс: Сон за 7 дней»)
  - Индикатор прогресса:
    - Линейный прогресс‑бар по времени или по шагам (например, сегменты вдох/задержка/выдох)
  - Кнопка выхода/закрытия:
    - При нажатии — диалог «Вы уверены, что хотите завершить практику?» с опциями «Завершить», «Продолжить»
- **Центральная зона**
  - Визуализация процесса:
    - Для дыхания: анимированный круг/волна, синхронизированная с фазами дыхания
    - Для медитаций/звуков: более спокойная визуализация (легкие волны, световые переходы)
  - Текстовые подсказки/подзаголовки по этапам («Вдохните…», «Задержите дыхание…», «Медленно выдохните…»)
  - Статус амулета:
    - Индикатор подключения (онлайн/офлайн)
    - Уровень заряда (иконка батареи)
    - Название активного паттерна
- **Нижняя панель управления**
  - Центральная кнопка: Старт/пауза/продолжить
  - Слайдер яркости/интенсивности вибрации с 3–4 делениями
  - Переключатель звука: «Аудио‑гид», «Только звук/музыка», «Без звука»
  - Доп. опция через меню (⋮): «Скрыть визуализацию» (для выполнения с закрытыми глазами)
- **Интеракции**
  - Свайп вверх может раскрывать дополнительную информацию/подсказки, свайп вниз — минимизировать интерфейс
  - При потере подключения к амулету — ненавязчивый баннер с CTA «Повторить подключение»
  - При уходе в фон (переход в другое приложение) — логика зависит от типа практики (например, дыхание ставится на паузу, аудио‑медитация может продолжаться)
- **Финальный экран после сессии**
  - Краткий отчёт:
    - Фактическая длительность, статус (завершено/прервано)
    - Для курсов — отметка прогресса в рамках курса
  - Слайдер оценки состояния («Как вы себя чувствуете?») + опциональный текстовый комментарий
  - CTA‑кнопки:
    - «Запланировать на завтра» (с выбором времени)
    - «Перейти к следующему шагу курса» (если практика была внутри курса)
    - «Вернуться в Дом практик»

### 4.4. Экран «Курс»
- **Основные блоки**
  - Hero:
    - Название курса, цель/обещание («Снизить уровень тревоги за 14 дней»)
    - Уровень (новичок/средний/продвинутый)
    - Общая длительность (например, «14 дней», «7 модулей»)
    - Бейджи: «новый», «популярный», «рекомендован»
  - Описание:
    - Для кого курс (перечень основных профилей)
    - Ожидаемый результат (что изменится к концу курса)
    - Требования (например, «желательно иметь возможность выполнять практики 10–15 минут в день»)
  - Структура курса:
    - Список модулей/дней в виде аккордеона или вертикального списка
    - Внутри модуля: практики с указанием длительности и статуса (не начата / в прогрессе / выполнена)
    - Дополнительные элементы: отметка «обязательная»/«опциональная» практика
  - Блок прогресса:
    - Прогресс‑бар по курсу (в процентах или по количеству выполненных практик)
    - Счётчики: «Завершено X из Y практик», «Streak: N дней подряд»
  - Блок расписания:
    - Рекомендованный ритм (например, «ежедневно», «3 раза в неделю»)
    - Отображение ближайших запланированных сессий в рамках курса
- **Интеракции и состояния**
  - В состоянии «не начат»:
    - Основной CTA: «Записаться на курс»
    - При нажатии — предложение выбрать время суток и дни недели, после чего курс появляется в «Сегодня по плану»
  - В состоянии «в процессе»:
    - Основной CTA: «Продолжить» (ведёт к следующей невыполненной обязательной практике)
    - В структуре курса явно подсвечивается текущий модуль/день
  - В состоянии «завершён»:
    - Появляется блок «Итог курса» со сводкой (время практик, сохранённые streaks)
    - CTA: «Пройти снова» или «Перейти к следующему курсу»
  - Долгое нажатие на модуль/день может открывать контекстное меню: «Отметить как выполненный», «Пропустить», «Подробнее о практиках»
- **CTA‑кнопки (нижняя панель)**
  - «Записаться на курс» / «Продолжить» (в зависимости от статуса)
  - «Добавить весь курс в план» (с выбором времени дня, если пользователь хочет жёстко зафиксировать)

### 4.5. Экран «Расписание»
- **Цель**
  - Дать пользователю ощущение структуры и контроля над практикой
- **Варианты представления**
  - Вкладки/переключатель внутри экрана (не на главном):
    - «Календарь» (месяц/неделя)
    - «Список» (ближайшие сессии)
- **Элементы**
  - Календарь:
    - Дни с точками/маркером, если на день есть практики
    - Тап по дню раскрывает список сессий в нижней части экрана
  - Список «Ближайшие сессии» (сегодня/завтра/на неделе):
    - Карточки: время, тип практики, курс/одиночная, длительность, статус (запланирована/просрочена/выполнена)
  - Быстрые действия на карточке:
    - «Начать» (если время уже пришло или близко)
    - «Перенести» (открывает компактный выбор времени/даты)
    - «Отменить» (с подтверждением)
- **Интеракции и состояния**
  - Пустое состояние: поясняющий текст и CTA «Создать первый план» (ведёт к мастеру планирования из практики/курса)
  - Просроченные сессии:
    - Могут группироваться в отдельный блок с предложением «Выполнить сейчас» или «Пропустить»
  - Синхронизация с курсами:
    - При изменении расписания внутри курса изменения отражаются в этом экране и наоборот

### 4.6. Экран «Статистика» по практикам
- **Основной фокус**
  - Показать вовлечённость и регулярность, не превращая экран в перегруженную аналитическую панель
- **Элементы**
  - Переключатель периода: день/неделя/месяц
  - График времени в практиках:
    - Столбчатая или линейная диаграмма по суммарным минутам
    - Возможность тапнуть по столбцу для просмотра деталей дня
  - Разбивка по типам:
    - Пирог/список: дыхание/медитация/звук/другое
    - Показ долей в процентах и минутах
  - Прогресс по курсам:
    - Список активных и недавно завершённых курсов с прогресс‑баром
    - Для завершённых — отметка, когда курс был пройден
  - Streaks и геймификация:
    - Текущий streak (дней подряд с практикой)
    - Лучший streak
    - Небольшие «бейджи» за достижения («3 дня подряд», «Первая неделя без пропусков»)
- **Интеракции и состояния**
  - Пустое состояние (мало данных):
    - Мягкое сообщение «Статистика появится, когда вы выполните несколько практик»
    - CTA «Начать с 5‑минутной практики»
  - Тап по элементу статистики может вести к соответствующему разделу:
    - По типу «дыхание» → список дыхательных практик
    - По курсу → экран курса

## 5. Enterprise‑аспекты UI/UX
- Чёткая иерархия: заголовки, подзаголовки, чипы статусов, единый дизайн карточек и фильтров
- Богатые, но контролируемые фильтры (сохранённые пресеты, «Сбросить всё»)
- Внятные состояния загрузки/ошибок/пустых экранов
- Прозрачность прогресса по курсам и плану (без скрытой логики)
- Возможность расширения до B2B‑кейсов (корпоративные программы):
  - дополнительные фильтры по программам компании
  - отчётность по выполнению курсов (можно вынести в отдельную спецификацию)

## 6. Интеграция с амулетом
- Каждая практика имеет связанный паттерн амулета и набор настроек
- В сессии пользователь всегда видит статус устройства и может быстро адаптировать интенсивность
- Курсы могут автоматически подстраивать паттерны под прогресс (например, мягче на старте, интенсивнее к концу)
